# Agentic RAG ç ”ç©¶åŠ©æ‰‹

æœ¬é¡¹ç›®æ˜¯ä¸€ä¸ªåŸºäº **LangGraph** å’Œ **DeepSeek** æ„å»ºçš„é«˜çº§ Agentic RAGï¼ˆæ£€ç´¢å¢å¼ºç”Ÿæˆï¼‰ç³»ç»Ÿã€‚å®ƒèƒ½å¤Ÿè‡ªåŠ¨é€šè¿‡å¼•å¯¼å¯¹è¯ç»†åŒ–ç”¨æˆ·è¯¾é¢˜ï¼Œæ‹†è§£ç ”ç©¶ä»»åŠ¡ï¼Œåˆ©ç”¨æœ¬åœ°å‘é‡æ•°æ®åº“ï¼ˆFAISSï¼‰æ£€ç´¢ Excel è§„æ ¼ä¹¦ï¼Œå¹¶ç»“åˆäº’è”ç½‘æœç´¢ï¼ˆTavilyï¼‰è¿­ä»£ç”Ÿæˆç ”ç©¶æŠ¥å‘Šã€‚

## ğŸŒŸ æ ¸å¿ƒç‰¹æ€§

- **äº¤äº’å¼æŸ¥è¯¢å¼•å¯¼ (Clarifier Expert)**ï¼šæ–°å¢ä¸“å®¶èŠ‚ç‚¹ï¼Œåœ¨ç ”ç©¶å¼€å§‹å‰è¯„ä¼°è¯¾é¢˜å…·ä½“æ€§ã€‚é’ˆå¯¹æ¨¡ç³Šè¯¾é¢˜ï¼Œè‡ªåŠ¨æä¾› 3-4 ä¸ªä¸“ä¸šå¼•å¯¼é€‰é¡¹ä¾›ç”¨æˆ·è¡¥å……ç»†èŠ‚ã€‚
- **å¤š Agent åä½œ**ï¼šé‡‡ç”¨ LangGraph æ„å»ºï¼ŒåŒ…å« Clarifierã€Plannerã€Executorã€Reviewer å’Œ Summarizer èŠ‚ç‚¹ï¼Œå®ç°ä»æ„å›¾ç†è§£åˆ°æŠ¥å‘Šç”Ÿæˆçš„é—­ç¯ã€‚
- **æ··åˆæ£€ç´¢**ï¼š
  - **æœ¬åœ°æœç´¢**ï¼šåŸºäº FAISS å’Œ `BAAI/bge-small-zh-v1.5` åµŒå…¥æ¨¡å‹ï¼Œå¯¹ Excel è§„æ ¼ä¹¦ï¼ˆå¼æ ·ä¹¦ï¼‰è¿›è¡Œè¯­ä¹‰æ£€ç´¢ã€‚
  - **ç½‘ç»œæœç´¢**ï¼šé›†æˆ Tavily Search API è·å–å®æ—¶äº’è”ç½‘ä¿¡æ¯ã€‚
- **è‡ªæˆ‘åæ€ä¸è¿­ä»£**ï¼šReviewer è¯„ä¼°ä¿¡æ¯å……è¶³æ€§ï¼Œè‡ªåŠ¨å†³å®šæ˜¯ç»§ç»­è¡¥å……æ£€ç´¢è¿˜æ˜¯ç»“æŸç”Ÿæˆã€‚

## ğŸ— æ¶æ„å›¾

```mermaid
graph TD
    START((å¼€å§‹)) --> Clarifier[Clarifier Expert<br/>æ„å›¾æ¾„æ¸…]
    Clarifier -- éœ€è¦ç»†èŠ‚ --> ASK[ç­‰å¾…ç”¨æˆ·è¾“å…¥/é€‰é¡¹]
    ASK --> Clarifier
    Clarifier -- ä»»åŠ¡æ˜ç¡®/è·³è¿‡ --> Planner[Planner<br/>ä»»åŠ¡æ‹†è§£]
    Planner --> Executor[Executor<br/>æ‰§è¡Œæ£€ç´¢]
    Executor --> Reviewer{Reviewer<br/>è¯„ä¼°ä¿¡æ¯}
    Reviewer -- ä¸è¶³ --> Planner
    Reviewer -- å……è¶³ --> Summarizer[Summarizer<br/>ç”ŸæˆæŠ¥å‘Š]
    Summarizer --> END((ç»“æŸ))
```

## ğŸ›  æŠ€æœ¯æ ˆ

- **æ¡†æ¶**: LangChain, LangGraph
- **å¤§æ¨¡å‹**: DeepSeek (deepseek-chat)
- **å‘é‡æ•°æ®åº“**: FAISS
- **åµŒå…¥æ¨¡å‹**: HuggingFace (BAAI/bge-small-zh-v1.5)
- **æ•°æ®å¤„ç†**: Pandas, Openpyxl, Pillow (ç”¨äºæµç¨‹å›¾æ˜¾ç¤º)

## ğŸš€ å¿«é€Ÿå¼€å§‹

### 1. ç¯å¢ƒå‡†å¤‡
```bash
pip install -r requirements.txt
```

### 2. é…ç½®ç¯å¢ƒå˜é‡ (.env)
```env
DEEPSEEK_API_KEY=your_key
TAVILY_API_KEY=your_key (å¯é€‰)
```

### 3. æ•°æ®å‡†å¤‡
æ”¾ç½® `Ballista_ä»•æ§˜æ›¸ãƒªã‚¹ãƒˆ.xlsx` äºæ ¹ç›®å½•ã€‚é¦–æ¬¡è¿è¡Œå°†è‡ªåŠ¨åˆå§‹åŒ– `faiss_index`ã€‚

### 4. è¿è¡Œ
```bash
python main.py
```

## ğŸ“‚ é¡¹ç›®ç»“æ„
```text
â”œâ”€â”€ app/
â”‚   â”œâ”€â”€ core/
â”‚   â”‚   â”œâ”€â”€ graph.py    # LangGraph å·¥ä½œæµå®šä¹‰ (å« Clarifier é€»è¾‘)
â”‚   â”‚   â””â”€â”€ nodes.py    # å„ Agent èŠ‚ç‚¹å®ç° (LLM æç¤ºè¯)
â”‚   â”œâ”€â”€ tools/
â”‚   â”‚   â””â”€â”€ search.py   # FAISS æ£€ç´¢ä¸ Tavily æœç´¢
â”‚   â””â”€â”€ state.py        # å…¨å±€ AgentState å®šä¹‰
â”œâ”€â”€ main.py             # äº¤äº’å¼ CLI å…¥å£ (æ”¯æŒå¼•å¯¼é€‰é¡¹é€‰æ‹©)
â””â”€â”€ requirements.txt    # ä¾èµ–é¡¹
```

## ğŸ“œ è®¸å¯è¯

æœ¬é¡¹ç›®éµå¾ª MIT è®¸å¯è¯ã€‚
